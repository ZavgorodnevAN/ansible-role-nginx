---
# Set the values allowed for various variables
nginx_setup_vars: [install, uninstall, upgrade]

nginx_install_from_vars: [nginx_repository, source, os_repository]

nginx_branch_vars: [mainline, stable]

# Determine the current value of 'nginx_state'
nginx_state_vals:
  install: present
  uninstall: absent
  upgrade: latest

nginx_default_setup: install
nginx_state: "{{ nginx_state_vals[nginx_setup] | default(nginx_state_vals[nginx_default_setup]) }}"

# Set the nginx_platforms check to opensource or plus
nginx_distributions: "{{ (nginx_type == 'opensource') | ternary(nginx_supported_distributions, nginx_plus_supported_distributions) }}"

# Supported NGINX Open Source distributions
# https://nginx.org/en/docs/install.html
nginx_supported_distributions:
    redhat:
    name: Red Hat Enterprise Linux
    versions: [7, 8, 9]
    architectures: "{{ (['x86_64', 'aarch64'] + ['s390x']) if (ansible_facts['distribution_major_version'] is version('8', '>=')) else ['x86_64', 'aarch64'] }}"

# Default NGINX Open Source repositories
nginx_default_repository_redhat: https://nginx.org/packages/{{ (nginx_branch == 'mainline') | ternary('mainline/', '') }}{{ (ansible_facts['distribution'] == 'CentOS') | ternary('centos', 'rhel') }}/{{ ansible_facts['distribution_major_version'] }}/$basearch/

# Red Hat dependencies
nginx_redhat_dependencies: [ca-certificates]

# Supported NGINX Open Source dynamic modules
nginx_modules_list: [geoip, image-filter, njs, perl, xslt]
